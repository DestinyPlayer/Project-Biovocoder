@page "/"
@inject HttpClient Http
@using Microsoft.AspNetCore.Components.WebAssembly.Rendering

<PageTitle>Main Page</PageTitle>
<div>
	<h1>Hello, world!</h1>

	<p>Welcome to your new app.</p>

	<p>Weh</p>
</div>
<div>
	<button @onclick="ConcatAudio">
		Concat Audio
	</button>
</div>
<div>
	@if (audioTest == null)
	{
		<p>WAITING FOR AUDIO</p>
	}
	else
	{
		<p>AUDIO RECEIVED</p>
		<audio controls>
			<source src=@audioTest type="audio/wav" />
		</audio>
	}
</div>
<div>
	<p>Testing</p>
	<audio controls>
		<source src="sounds/testing/switch.wav" type="audio/wav" />
	</audio>
</div>

@code {
	public AudioFileReader? audioTest;
	public void ConcatAudio()
	{
		using (var reader = new MediaFoundationReader("sounds/testing/switch.wav"))
		{
			MediaFoundationEncoder.EncodeToMp3(reader, audioTest);
		}
		Console.WriteLine("Testing!");
	}
}